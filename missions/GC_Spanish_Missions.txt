gc_spain_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_cas_spa_plus_ultra = {
		icon = mission_plus_ultra
		required_missions = { }
		completed_by = 1492.1.1

		provinces_to_highlight = {
			province_id = 4565
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_explorers = 1
			custom_trigger_tooltip = {
				tooltip = spa_plus_ultra_tooltip
				OR = {
					owns_core_province = 4565
					any_owned_province = {
						OR = {
							continent = north_america
							continent = south_america
							continent = new_world
						}
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = "spa_plus_ultra"
				duration = 7300
			}
		}
	}
	gc_cas_spa_caribbean_discovery = {
		icon = mission_establish_high_seas_navy
		required_missions = { gc_cas_spa_plus_ultra }
		position = 2
		completed_by = 1492.1.1

		# free mission

		trigger = {
			if = {
				limit = {
					is_random_new_world = yes
				}
				custom_trigger_tooltip = {
					tooltip = cas_carib_rnw
					any_owned_province = {
						continent = new_world
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = miss_discover_caribbean
					colonial_the_carribean = { has_discovered = ROOT }
				}
			}
		}

		effect = {
			if = {
				limit = {
					owns_core_province = 224
				}
				set_country_flag = sevilla_trade_center_flag
				country_event = { id = flavor_spa.3153 }
			}
			add_country_modifier = {
				name = "spa_hispaniola_discovered"
				duration = 5475
			}
			
			hidden_effect = {
				if = {
					limit = {
						4619 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					4619 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move

						cede_province = 0
					}
				}
				
				if = {
					limit = {
						490 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					490 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move

						cede_province = 0
					}
				}
			}
			
			4619 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
			
			490 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
			dominica_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			hispaniola_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}
	
gc_spain_1_b = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	gc_cas_spa_cuba_discovery = {
		icon = mission_establish_high_seas_navy
		required_missions = { gc_cas_spa_plus_ultra }
		position = 2
		completed_by = 1508.1.1

		# free mission

		trigger = {
			if = {
				limit = {
					is_random_new_world = yes
				}
				custom_trigger_tooltip = {
					tooltip = cas_carib_rnw
					any_owned_province = {
						continent = new_world
					}
				}
			}
			else = {
				AND = {
					cuba_area = { has_discovered = ROOT }
					east_cuba_area = { has_discovered = ROOT }
				 }
			}
		}

		effect = {
			if = {
				limit = {
					owns_core_province = 224
				}
				set_country_flag = sevilla_trade_center_flag
				country_event = { id = flavor_spa.3153 }
			}
			add_country_modifier = {
				name = "spa_hispaniola_discovered"
				duration = 5475
			}
			
			hidden_effect = {
				if = {
					limit = {
						2654 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					2654 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
			
			2654 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
			
			cuba_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

gc_spain_1_c = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	gc_cas_spa_caribbean_colony = {
		icon = mission_colonize_the_caribbean
		required_missions = { gc_cas_spa_caribbean_discovery }
		position = 3
		completed_by = 1493.1.1

		# free mission

		provinces_to_highlight = {
			OR = {
				area = dominica_area
				area = hispaniola_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			#custom_trigger_tooltip = {
				#tooltip = miss_colonize_caribbean
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 7
					OR = {
						area = dominica_area
						area = hispaniola_area
					}
					is_city = yes
				}
			#}
		}

		effect = {
			add_prestige = 15
			add_country_modifier = {
				name = "the_unknown_frontier"
				duration = 5475
			}
			
			hidden_effect = {
				if = {
					limit = {
						492 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					492 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
				
				if = {
					limit = {
						487 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					487 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
			
			every_province = {
				limit = {
					OR = {
						area = dominica_area
						area = hispaniola_area
					} 
				}
				if = { 
					limit = { is_empty = yes }
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
				add_territorial_core = ROOT
			}
			
			492 = {
					if = {
						limit = { is_empty = yes }
						change_religion = ROOT	
						change_culture = ROOT
						cede_province = ROOT
						add_territorial_core = ROOT
					}
				}
				
			487 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
		}
	}
	gc_cas_spa_hispaniola = {
		icon = mission_claim_hispaniola
		required_missions = { gc_cas_spa_caribbean_colony }
		completed_by = 1493.1.1
		position = 4

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = hispaniola_area
						area = dominica_area
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT }

				}
				province_id = 490
			}
			has_discovered = ROOT
		}
		
		ai_priority = {
            factor = 400
        }

		trigger = {
			if = {
				limit = {
					ai = no
				}
				490 = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						has_building = temple
						has_building = cathedral
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = cas_spa_hispaniola.tooltip
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 5
					OR = {
						area = hispaniola_area
						area = dominica_area
					}
					is_city = yes
				}
			}
		}
		effect = {
			define_conquistador = {
				shock = 5
				fire = 5
				manuever = 6
				siege = 1
				name = "Hern�n Cort�s"
			}
			
			hidden_effect = {
				if = {
					limit = {
						2819 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					2819 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
			
			2819 = {
					if = {
						limit = { is_empty = yes }
						change_religion = ROOT	
						change_culture = ROOT
						cede_province = ROOT
						add_territorial_core = ROOT
					}
				}
			
			490 = {
				add_base_production = 3
				if = {
					limit = {
						NOT = {
							trade_goods = sugar
						}
					}
					change_trade_goods = sugar
				}
			}
			mexico_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT	}
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
			eastern_mexico_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT	}
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
			puebla_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT	}
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
			panama_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT	}
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_mayans = {
		icon = mission_mayan_conquest
		required_missions = { gc_cas_spa_hispaniola }
		completed_by = 1493.1.1
		position = 4

		provinces_to_highlight = {
			OR = {
				region = central_america_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
			is_empty = no
		}
		
		ai_priority = {
            factor = 400
        }

		trigger = {
			central_america_region = {
				type = all
				OR = {
					is_empty = yes
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			
		}
		effect = {
			every_province = {
				limit = {
					OR = {
						area = honduras_area
						area = nicaragua_area
						area = costa_rica_area
					} 
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			central_america_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_treasury = 500
		}
	}
	gc_cas_spa_baja_california = {
		icon = mission_colonize_california
		required_missions = { gc_cas_spa_new_spain }
		position = 8
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			area = baja_california_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				area = baja_california_area
				is_city = yes
			}
		}
		effect = {
			add_dip_power = 50
			every_province = {
				limit = {
					area = baja_california_area
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			colonial_texas = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_texas = {
		icon = mission_colonial
		required_missions = { gc_cas_spa_baja_california }
		position = 9
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			colonial_region = colonial_texas
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 14
				colonial_region = colonial_texas
				is_city = yes
			}
		}
		effect = {
			add_adm_power = 50
			every_province = {
				limit = {
					colonial_region = colonial_texas
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			
			colonial_arizona = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			
			colonial_louisiana = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_arizona = {
		icon = mission_colonial
		required_missions = { gc_cas_spa_texas }
		position = 10
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			colonial_region = colonial_arizona
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				colonial_region = colonial_arizona
				is_city = yes
			}
		}
		effect = {
			add_adm_power = 100
			every_province = {
				limit = {
					colonial_region = colonial_arizona
				}
				add_territorial_core = ROOT	
				cede_province = ROOT
				change_religion = ROOT	
				change_culture = ROOT
			}
			colonial_california = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_california = {
		icon = mission_colonize_california
		required_missions = { gc_cas_spa_arizona }
		position = 11
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			colonial_region = colonial_california
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			2021 = {
				country_or_non_sovereign_subject_holds = ROOT
				if = {
					limit = {
						has_dlc = "Golden Century"
					}
					has_holy_order_trigger = yes
				}
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				NOT = {
					area = snake_river_area
				}
				value = 12
				colonial_region = colonial_california
				is_city = yes
			}
		}
		effect = {
			add_dip_power = 100
			2021 = {
				add_base_tax = 3
			}
			every_province = {
				limit = {
					colonial_region = colonial_california
					province_id = 1808
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			
			colonial_columbia = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}
gc_spain_alaska = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes
	
	gc_cas_spa_oregon = {
		icon = mission_colonial
		required_missions = { gc_cas_spa_california }
		position = 12
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_oregon
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				colonial_region = colonial_oregon
				is_city = yes
			}
		}
		effect = {
			add_adm_power = 100
			every_province = {
				limit = {
					OR = {
						colonial_region = colonial_oregon
					}
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			
			colonial_columbia = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	gc_cas_spa_columbia = {
		icon = mission_rb_colonise_canada
		required_missions = { gc_cas_spa_oregon }
		position = 13
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_columbia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12
				colonial_region = colonial_columbia
				is_city = yes
			}
		}
		effect = {
			add_adm_power = 150
			every_province = {
				limit = {
					OR = {
						colonial_region = colonial_columbia
					}
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			
			colonial_alaska = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	gc_cas_spa_alaska = {
		icon = mission_colonize_alaska
		required_missions = { gc_cas_spa_columbia }
		position = 14
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_alaska
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}
		
		ai_priority = {
			factor = 2
		}

		trigger = {
			colonial_alaska = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_adm_power = 150
			976 = {
				rename_capital = "Juneau"
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			
		}
	}
}

gc_spain_2 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_cas_spa_navarra = {
		icon = mission_subjugate_navarra
		required_missions = { gc_cas_spa_army_ready }
		completed_by = 1493.1.1
		position = 2

		provinces_to_highlight = {
			province_id = 210
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			210 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					210 = {
						NOT = {
							OR = {
								has_building = fort_15th
								has_building = fort_16th
								has_building = fort_17th
								has_building = fort_18th
							}
						}
					}
				}
				210 = {
					add_building = fort_15th
				}
			}
			210 = {
				add_province_modifier = {
					name = "fortified_navarra"
					duration = 7300
				}
			}
		}
	}

	gc_cas_spa_expel_moriscos = {
		icon = mission_expel_the_moriscos
		required_missions = { gc_cas_spa_iberia_christian }
		completed_by = 1493.1.1
		position = 4

		provinces_to_highlight = {
			OR = {
				area = upper_andalucia_area
				area = lower_andalucia_area
			}
			NOT = { culture = ROOT }
		}

		trigger = {
			upper_andalucia_area = {
				type = all
				culture = ROOT
			}
			lower_andalucia_area = {
				type = all
				culture = ROOT
			}
		}
		effect = {
			add_dip_power = 100
			add_country_modifier = {
				name = "displaced_moriscos"
				duration = 7300
			}
		}
	}
}

gc_spain_2_b = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes
	gc_cas_spa_cuba_colony = {
		icon = mission_colonize_the_caribbean
		required_missions = { gc_cas_spa_cuba_discovery }
		position = 3
		completed_by = 1493.1.1

		# free mission

		provinces_to_highlight = {
			OR = {
				area = cuba_area
				area = east_cuba_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			#custom_trigger_tooltip = {
				#tooltip = miss_colonize_caribbean
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 7
					OR = {
						area = cuba_area
						area = east_cuba_area
					}
					is_city = yes
				}
			#}
		}

		effect = {
			add_prestige = 15
			add_country_modifier = {
				name = "the_unknown_frontier"
				duration = 5475
			}
			
			every_province = {
				limit = {
					OR = {
						area = cuba_area
						area = east_cuba_area
					} 
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
		}
	}
	gc_cas_spa_havana = {
		icon = mission_found_havana
		required_missions = { gc_cas_spa_cuba_colony }
		completed_by = 1493.1.1

		provinces_to_highlight = {
			OR = {
				area = cuba_area
				area = east_cuba_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
			province_id = 490
		}
		
		ai_priority = {
            factor = 400
        }

		trigger = {
			if = {
				limit = {
					ai = no
				}
				484 = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						has_building = workshop
						has_building = counting_house
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = cas_spa_havana.tooltip
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value =  5
					OR = {
						area = cuba_area
						area = east_cuba_area
					}
				}
			}
		}
		effect = {
			set_country_flag = spa_house_of_trade_flag
			country_event = { id = flavor_spa.1003 }
			
			hidden_effect = {
				if = {
					limit = {
						2647 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					2647 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
			
			2647 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
				
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = colony
						owns = 484
					}
				}
				every_subject_country = {
					limit = {
						owns = 484
					}
					484 = {
						prev_move_capital_effect = yes
					}
				}
			}
			central_america_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
					is_empty = no
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	gc_cas_spa_aztecs = {
		icon = mission_iberian_conquistador
		required_missions = { gc_cas_spa_havana }
		completed_by = 1521.1.1

		# free mission

		provinces_to_highlight = {
			OR = {
				area = mexico_area
				area = eastern_mexico_area
				area = puebla_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}
		
		ai_priority = {
            factor = 400
        }

		trigger = {
			mexico_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			eastern_mexico_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			puebla_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			add_treasury = 800
			mexico_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT	}
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_aztecs_2 = {
		icon = mission_mayan_conquest
		required_missions = { gc_cas_spa_aztecs gc_cas_spa_mayans }
		completed_by = 1530.1.1

		provinces_to_highlight = {
			OR = {
				region = mexico_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
			is_empty = no
		}
		
		ai_priority = {
            factor = 400
        }

		trigger = {
			mexico_region = {
				type = all
				OR = {
					is_empty = yes
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			
		}
		effect = {
			every_province = {
				limit = {
					region = mexico_region
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			add_treasury = 500
			
			colonial_mexico = {
				limit = {
					NOT = { is_permanent_claim = ROOT	}
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_new_spain = {
		icon = mission_kingdom_of_new_spain
		required_missions = { gc_cas_spa_aztecs_2 }
		position = 7
		completed_by = 1521.1.1

		provinces_to_highlight = {
			colonial_region = colonial_mexico
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}
		
		ai_priority = {
			factor = 400
		}

		trigger = {
			if = {
				limit = {
					has_dlc = "Golden Century"
					ai = no
				}
				custom_trigger_tooltip = {
					tooltip = mexico_holy_order_tooltip
					num_of_states_owned_or_owned_by_non_sovereign_subjects_with = {
						has_holy_order_trigger = yes
						region = mexico_region
						value = 5
					}
				}
			}
			colonial_mexico = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "spa_colonies_united"
				duration = -1
			}
			add_country_modifier = {
				name = "viceroyalty_of_new_spain"
				duration = 7300
			}
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = colony
						owns = 852
					}
					852 = { is_capital = no }
				}
				every_subject_country = {
					limit = {
						owns = 852
					}
					852 = {
						prev_move_capital_effect = yes
					}
				}
			}
			colonial_florida = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
					is_empty = no
				}
				add_permanent_claim = ROOT
			}
			hidden_effect = {
				if = {
					limit = {
						927 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					927 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
			
			927 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
			
			colonial_florida = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			
			baja_california_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_col_florida = {
		icon = mission_colonize_florida
		required_missions = { gc_cas_spa_new_spain }
		position = 8
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			colonial_region = colonial_florida
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { fort_level = 3 }
			}
			has_discovered = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				colonial_region = colonial_florida
				is_city = yes
			}
		}
		effect = {
			add_mil_power = 50
			every_province = {
				limit = {
					colonial_region = colonial_florida
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
		}
	}
	gc_cas_spa_florida = {
		icon = mission_colonize_florida
		required_missions = { gc_cas_spa_col_florida }
		position = 9
		#completed_by = 1521.1.1

		provinces_to_highlight = {
			colonial_region = colonial_florida
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { fort_level = 3 }
			}
			has_discovered = ROOT
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = cas_spa_florida_forts.tooltip
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 3
					colonial_region = colonial_florida
					fort_level = 3
				}
			}
		}
		effect = {
			add_mil_power = 100
			custom_tooltip = fortified_florida_tooltip
			hidden_effect = {
				every_province = {
					limit = {
						OR = {
							owned_by = ROOT
							owner = {
								is_subject_of = ROOT
							}
						}
						OR = {
							region = southeast_america_region
							area = west_florida_area
						}
						fort_level = 3
					}
					add_province_modifier = {
						name = "fortified_florida_modifier"
						duration = -1
					}
				}
			}
		}
	}
	
	spa_conquer_louisiana = {
		icon = mission_the_french_menace
		required_missions = { gc_cas_spa_texas }
		position = 10
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_louisiana
				colonial_region = colonial_ohio
				colonial_region = colonial_quebec
				colonial_region = colonial_acadia
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { country_or_non_sovereign_subject_holds = ENG }
				NOT = { country_or_non_sovereign_subject_holds = GBR }
				NOT = {
					controller = {
						OR = {
							is_subject_of = ROOT
							is_subject_of = ENG
							is_subject_of = GBR
						}
					}
				}
				NOT = { controlled_by = ROOT }
				NOT = { controlled_by = ENG }
				NOT = { controlled_by = GBR }
				NOT = { 
					owner = {
						capital_scope = {
							OR = {
								colonial_region = colonial_louisiana
								colonial_region = colonial_ohio
								colonial_region = colonial_quebec
								colonial_region = colonial_acadia
							}
						}
						is_colonial_nation = no
					}
				}
			}
			has_discovered = ROOT
		}
		
		ai_priority = {
			factor = 1000
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = treaty_of_paris_spa_tt
				OR = {
					AND = {
						NOT = {
							OR = {
								current_age = age_of_discovery
								current_age = age_of_reformation
							}
						}
						colonial_louisiana = {
							type = all
							OR = {
								country_or_non_sovereign_subject_holds = ROOT
								country_or_non_sovereign_subject_holds = ENG
								country_or_non_sovereign_subject_holds = GBR
								controlled_by = ROOT
								controlled_by = ENG
								controlled_by = GBR
								controller = {
									OR = {
										is_subject_of = ROOT
										is_subject_of = ENG
										is_subject_of = GBR
									}
								}
								owner = {
									capital_scope = {
										colonial_region = colonial_louisiana
									}
									is_colonial_nation = no
								}
							}
						}
						colonial_ohio = {
							type = all
							OR = {
								country_or_non_sovereign_subject_holds = ROOT
								country_or_non_sovereign_subject_holds = ENG
								country_or_non_sovereign_subject_holds = GBR
								controlled_by = ROOT
								controlled_by = ENG
								controlled_by = GBR
								controller = {
									OR = {
										is_subject_of = ROOT
										is_subject_of = ENG
										is_subject_of = GBR
									}
								}
								owner = {
									capital_scope = {
										colonial_region = colonial_ohio
									}
									is_colonial_nation = no
								}
							}
						}
						colonial_quebec = {
							type = all
							OR = {
								country_or_non_sovereign_subject_holds = ROOT
								country_or_non_sovereign_subject_holds = ENG
								country_or_non_sovereign_subject_holds = GBR
								controlled_by = ROOT
								controlled_by = ENG
								controlled_by = GBR
								controller = {
									OR = {
										is_subject_of = ROOT
										is_subject_of = ENG
										is_subject_of = GBR
									}
								}
								owner = {
									capital_scope = {
										colonial_region = colonial_quebec
									}
									is_colonial_nation = no
								}
							}
						}
						colonial_acadia = {
							type = all
							OR = {
								country_or_non_sovereign_subject_holds = ROOT
								country_or_non_sovereign_subject_holds = ENG
								country_or_non_sovereign_subject_holds = GBR
								controlled_by = ROOT
								controlled_by = ENG
								controlled_by = GBR
								controller = {
									OR = {
										is_subject_of = ROOT
										is_subject_of = ENG
										is_subject_of = GBR
									}
								}
								owner = {
									capital_scope = {
										colonial_region = colonial_acadia
									}
									is_colonial_nation = no
								}
							}
						}
					}
					OR = {
						ENG = { has_country_flag = paris_treaty }
						GBR = { has_country_flag = paris_treaty }
						CAS = { has_country_flag = paris_treaty }
						SPA = { has_country_flag = paris_treaty }
						IBA = { has_country_flag = paris_treaty }
					}
				}
			}
		}
	
		effect = {
			add_prestige = 25
			
			if = {
				limit = {
					exists = GBR
				}
				if = {
					limit = {
						OR = {
							exists = ENG
							exists = GBR
						}
						OR = {
							exists = CAS
							exists = SPA
							exists = IBA
						}
						
						colonial_florida = {
							owner = {
								OR = {
									is_colonial_nation_of = CAS
									is_colonial_nation_of = SPA
									is_colonial_nation_of = IBA
								}
							}
						}
						OR = {
							colonial_texas = {
								owner = {
									OR = {
										is_colonial_nation_of = CAS
										is_colonial_nation_of = SPA
										is_colonial_nation_of = IBA
									}
								}
							}
							
							colonial_mexico = {
								owner = {
									OR = {
										is_colonial_nation_of = CAS
										is_colonial_nation_of = SPA
										is_colonial_nation_of = IBA
									}
								}
							}
							
							colonial_the_carribean = {
								owner = {
									OR = {
										is_colonial_nation_of = CAS
										is_colonial_nation_of = SPA
										is_colonial_nation_of = IBA
									}
								}
							}
						}
					}
					GBR = {
						if = {
							limit = {
								NOT = { has_country_flag = paris_treaty }
								NOT = { has_country_flag = french_america_conquered }
							}
							ROOT = {
								country_event = { id = flavor_spa_rh.1004 days = 1 }
							}
							set_country_flag = french_america_conquered
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						OR = {
							exists = ENG
							exists = GBR
						}
						OR = {
							exists = CAS
							exists = SPA
							exists = IBA
						}
						
						colonial_florida = {
							owner = {
								OR = {
									is_colonial_nation_of = CAS
									is_colonial_nation_of = SPA
									is_colonial_nation_of = IBA
								}
							}
						}
						OR = {
							colonial_texas = {
								owner = {
									OR = {
										is_colonial_nation_of = CAS
										is_colonial_nation_of = SPA
										is_colonial_nation_of = IBA
									}
								}
							}
							
							colonial_mexico = {
								owner = {
									OR = {
										is_colonial_nation_of = CAS
										is_colonial_nation_of = SPA
										is_colonial_nation_of = IBA
									}
								}
							}
							
							colonial_the_carribean = {
								owner = {
									OR = {
										is_colonial_nation_of = CAS
										is_colonial_nation_of = SPA
										is_colonial_nation_of = IBA
									}
								}
							}
						}
					}
					ENG = {
						if = {
							limit = {
								NOT = { has_country_flag = paris_treaty }
								NOT = { has_country_flag = french_america_conquered }
							}
							ROOT = {
								country_event = { id = flavor_eng.1004 days = 1 }
							}
							set_country_flag = french_america_conquered
						}
					}
				}
			}
		}
	}
}

gc_spain_3 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_cas_spa_army_ready = {
		icon = mission_assemble_an_army
		required_missions = {  }
		completed_by = 1445.1.1

		# free mission

		trigger = {
			army_size_percentage = 1
			navy_size_percentage = 1
			manpower_percentage = 0.6
			num_of_generals = 1
		}

		effect = {
			add_country_modifier = {
				name = "spa_rb_morale"
				duration = 5475
			}
			upper_andalucia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			210 = {
				if = {
					limit = {
						NOT = {
							is_permanent_claim = ROOT
							is_core = ROOT
						}
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	gc_cas_spa_reconquista_one = {
		icon = mission_unite_home_region
		required_missions = { gc_cas_spa_army_ready }
		completed_by = 1492.1.1

		provinces_to_highlight = {
			area = upper_andalucia_area
			NOT = { owned_by = ROOT }
		}

		trigger = {
			upper_andalucia_area = {
				type = all
				owned_by = ROOT
			}
		}

		effect = {
			set_country_flag = fate_of_granada_mission_flag
			country_event = {
				id = flavor_spa.8
			}
		}
	}
	gc_cas_spa_iberia_christian = {
		icon = mission_religious
		required_missions = { gc_cas_spa_reconquista_one }
		completed_by = 1511.1.1

		# free mission

		provinces_to_highlight = {
			region = iberia_region
			NOT = { religion_group = ROOT }
		}

		trigger = {
			iberia_region = {
				type = all
				religion_group = ROOT
			}
		}

		effect = {
			add_country_modifier = {
				name = "spa_rb_christian_iberia"
				duration = 5475
			}
			126 = {
				add_permanent_claim = ROOT
			}
			northern_morocco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_reconquista_four = {
		icon = mission_assemble_an_army
		required_missions = { gc_cas_spa_iberia_christian }

		# free mission

		provinces_to_highlight = {
			area = northern_morocco_area
			NOT = { owned_by = ROOT }
		}

		trigger = {
			northern_morocco_area = {
				type = all
				owned_by = ROOT
			}
		}

		effect = {
			add_country_modifier = {
			name = "completing_the_reconquista"
			duration = 5475
			}
			western_morocco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
			}
			algiers_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
			}
		}
	}
	
	gc_cas_spa_unite = {
		icon = mission_unite_home_region
		required_missions = { gc_cas_spa_reconquista_four }
		position = 3

		provinces_to_highlight = {
			OR = {
				province_id = 213	# Barcelona
				province_id = 214	# Aragón
				province_id = 215	# Castilla La Vieja
				province_id = 216	# Salamanca
				province_id = 224	# Andalucia
				province_id = 219	# Toledo
				province_id = 220	# Valencia
				province_id = 223	# Granada
				region = iberia_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			tag = IBA
		}

		effect = {
			add_adm_power = 50
			add_dip_power = 50
			add_mil_power = 50
			add_casus_belli = {
				type = cb_restore_personal_union
				months = 300
				target = FRA
			}
		}
	}
}

gc_spain_3_b = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	gc_cas_spa_spanish_panama = {
		icon = mission_colonize_the_caribbean
		required_missions = { gc_cas_spa_havana gc_cas_spa_hispaniola }
		completed_by = 1508.1.1
		position = 5
		
		provinces_to_highlight = {
			area = panama_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = yes
		}
		
		trigger = {
			panama_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		ai_priority = {
            factor = 400
        }
		
		effect = {
			hidden_effect = {
				if = {
					limit = {
						502 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					502 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
					
					if = {
						limit = {
							927 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
							ai = yes
						}
						927 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
						
							cede_province = 0
						}
					}
				}
				
				if = {
					limit = {
						ai = yes
					}
					927 = {
						if = {
							limit = { is_empty = yes }
							change_religion = ROOT	
							change_culture = ROOT
							cede_province = ROOT
							add_territorial_core = ROOT
						}
					}
					
					colonial_florida = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			
				502 = {
					if = {
						limit = { is_empty = yes }
						change_religion = ROOT	
						change_culture = ROOT
						cede_province = ROOT
						add_core = ROOT
					}
				}
				
				every_province = {
					limit = {
						colonial_region = colonial_colombia
						owned_by = ROOT
					}
					add_permanent_claim = ROOT
				}
			}
			popayan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			
			coquivacoa_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			
			cordillera_occidental_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			
			bogota_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

gc_spain_3_c = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes
	gc_cas_spa_spanish_colombia = {
		icon = mission_new_kingdom_of_granada
		required_missions = { gc_cas_spa_spanish_panama }
		completed_by = 1508.1.1
		position = 6
		
		provinces_to_highlight = {
			OR = {
				area = popayan_area
				area = coquivacoa_area
				area = cordillera_occidental_area
				area = bogota_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = yes
		}
		
		ai_priority = {
            factor = 400
        }
		
		trigger = {
			popayan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			coquivacoa_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			cordillera_occidental_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			bogota_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			every_province = {
				limit = {
					OR = {
						area = venezuela_area
						area = central_llanos_area
						area = eastern_llanos
						area = maracaibo_area
					}
					NOT = { province_id = 4710 }
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			colonial_colombia = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			} 
		}
	}
	gc_cas_spa_spanish_main = {
		icon = mission_establish_high_seas_navy
		required_missions = { gc_cas_spa_spanish_colombia }
		completed_by = 1509.1.1
		position = 7

		provinces_to_highlight = {
			colonial_region = colonial_colombia
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = yes
		}

		# free mission

		trigger = {
			custom_trigger_tooltip = {
				tooltip = spa_rb_spanish_main.tooltip
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 5
					colonial_region = colonial_colombia
					is_city = yes
				}
			}
		}

		effect = {
			hidden_effect = {
				if = {
					limit = {
						806 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					806 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
			
			806 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
			
			define_conquistador = {
				name = "Francisco Pizarro"
				fire = 4
				shock = 4
				manuever = 5
				siege = 1
			}
			upper_peru = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			potosi_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			antisuyu_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kuntisuyu_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			huanuco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			cajamarca_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			quito_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			794 = {
				add_permanent_claim = ROOT
			}
			2837 = {
				add_permanent_claim = ROOT
			}
			2823 = {
				add_permanent_claim = ROOT
			}
			2826 = {
				add_permanent_claim = ROOT
			}
			812 = {
				add_permanent_claim = ROOT
			}
			2822 = {
				add_permanent_claim = ROOT
			}
			2821 = {
				add_permanent_claim = ROOT
			}
			guatemala_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_yucatan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			yucatan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			chiapas_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			oaxaca_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}

			eastern_mexico_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			guerrero_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			michoacan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			2657 = {
				add_permanent_claim = ROOT
			}
			2621 = {
				add_permanent_claim = ROOT
			}
			854 = {
				add_permanent_claim = ROOT
			}
			2642 = {
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_incans = {
		icon = mission_war_chest
		required_missions = { gc_cas_spa_spanish_main }
		position = 8
		completed_by = 1536.1.1

		# free mission

		provinces_to_highlight = {
			OR = {
				area = upper_peru
				area = potosi_area
				area = antisuyu_area
				area = kuntisuyu_area
				province_id = 794
				province_id = 2837
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			upper_peru = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			potosi_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			antisuyu_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kuntisuyu_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			794 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			2837 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			add_treasury = 500
			peru_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_potosi = {
		icon = mission_potosi_silver
		required_missions = { gc_cas_spa_incans gc_cas_spa_west_africa }
		#completed_by = 1509.1.1

		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 795
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				province_id = 809
				AND = {
					OR = {
						province_id = 809
						province_id = 835
						province_id = 1516
					}
					NOT = { is_strongest_trade_power = ROOT }
				}
			}
		}

		trigger = {
			809 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			if = {
				limit = {
					has_dlc = "Dharma"
				}
				809 = {
					province_has_center_of_trade_of_level = 3
				}
			}
			else = {
				809 = {
					OR = {
						has_building = trade_depot
						has_building = stock_exchange
					}
				}
			}
			809 = {
				is_strongest_trade_power = ROOT
			}
			835 = {
				is_strongest_trade_power = ROOT
			}
			1516 = {
				is_strongest_trade_power = ROOT
			}
			795 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = colony
						owns = 809
					}
				}
				every_subject_country = {
					limit = {
						owns = 809
					}
					809 = {
						prev_move_capital_effect = yes
					}
				}
			}
			795 = {
				add_province_modifier = {
					name = "spa_rb_gold_rush"
					duration = 5475
				}
			}
			2946 = {
				add_province_modifier = {
					name = "spa_rb_gold_rush"
					duration = 5475
				}
			}
			2941 = {
				add_province_modifier = {
					name = "spa_rb_gold_rush"
					duration = 5475
				}
			}
			804 = {
				add_province_modifier = {
					name = "spa_rb_gold_rush"
					duration = 5475
				}
			}
		}
	}
	gc_cas_spa_native_reductions = {
		icon = mission_native_reductions
		required_missions = { gc_cas_spa_potosi }
		#completed_by = 1509.1.1
		position = 10

		provinces_to_highlight = {
			province_id = 216
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { has_building = university }
			}
		}

		trigger = {
			if = {
				limit = {
					has_dlc = "Golden Century"
				}
				custom_trigger_tooltip = {
					tooltip = native_reductions_tooltip
					num_of_states_owned_or_owned_by_non_sovereign_subjects_with = {
						has_holy_order_trigger = yes
						OR = {
							continent = north_america
							continent = south_america
						}
						value = 15
					}
				}
			}
			216 = { # school of salamanca
				has_building = university
			}
		}
		effect = {
			if = {
				limit = {
					religion = catholic
				}
				add_papal_influence = 50
			}
			else = {
				add_dip_power = 100
			}
			if = {
				limit = {
					any_country = {
						is_subject_of = ROOT
						is_subject_of_type = colony
					}
				}
				every_country = {
					limit = {
						is_subject_of = ROOT
						is_subject_of_type = colony
					}
					add_country_modifier = {
						name = "spa_native_reductions"
						duration = 7300
					}
				}
			}
		}
	}
}

gc_spain_4 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_cas_spa_reconquista_three = {
		icon = mission_have_two_subjects
		required_missions = {  }
		completed_by = 1479.1.1

		provinces_to_highlight = {
			OR = {
				area = valencia_area
				area = catalonia_area
				area = aragon_area
			}
			NOT = { owned_by = ROOT }
		}

		trigger = {
			valencia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			catalonia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			aragon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			if = {
				limit = {
					exists = POR
					is_subject = no
					government = monarchy
					religion_group = christian
					POR = {
						is_subject = no
						government = monarchy
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = POR
				}
			}
			else = {
				alentejo_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				beieras_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
			}
			if = {
				limit = {
					NOT = { NAP = { is_subject_of = ROOT } }
				}
				sicily_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				calabria_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				apulia_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				2983 = {
					if = {
						limit = {
							NOT = {
								is_permanent_claim = ROOT
								is_core = ROOT
							}
						}
						add_permanent_claim = ROOT
					}
				}
				121 = {
					if = {
						limit = {
							NOT = {
								is_permanent_claim = ROOT
								is_core = ROOT
							}
						}
						add_permanent_claim = ROOT
					}
				}
				120 = {
					if = {
						limit = {
							NOT = {
								is_permanent_claim = ROOT
								is_core = ROOT
							}
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				sicily_area = {
					limit = {
						NOT = { country_or_non_sovereign_subject_holds = ROOT }
					}
					add_permanent_claim = NAP
				}
				calabria_area = {
					limit = {
						NOT = { country_or_non_sovereign_subject_holds = ROOT }
					}
					add_permanent_claim = NAP
				}
				apulia_area = {
					limit = {
						NOT = { country_or_non_sovereign_subject_holds = ROOT }
					}
					add_permanent_claim = NAP
				}
				2983 = {
					if = {
						limit = {
							NOT = { country_or_non_sovereign_subject_holds = ROOT }
						}
						add_permanent_claim = NAP
					}
				}
				121 = {
					if = {
						limit = {
							NOT = { country_or_non_sovereign_subject_holds = ROOT }
						}
						add_permanent_claim = NAP
					}
				}
				120 = {
					if = {
						limit = {
							NOT = { country_or_non_sovereign_subject_holds = ROOT }
						}
						add_permanent_claim = NAP
					}
				}
			}
		}
	}
	gc_cas_spa_italian_ambition = {
		icon = mission_italian_condottiere
		required_missions = { gc_cas_spa_reconquista_three }
		completed_by = 1516.1.1

		provinces_to_highlight = {
			OR = {
				area = sicily_area
				area = calabria_area
				area = apulia_area
				province_id = 2983
				province_id = 121
				province_id = 120
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			sicily_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			calabria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			apulia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			2983 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			121 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			120 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			add_country_modifier = {
				name = "spa_rb_italian_ambition_mod"
				duration = 5475
			}
			tuscany_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lombardy_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			wallonia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			flanders_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_italian_ambition_2 = {
		icon = mission_italian_conquest
		required_missions = { gc_cas_spa_italian_ambition }

		provinces_to_highlight = {
			OR = {
				area = tuscany_area
				area = lombardy_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			tuscany_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lombardy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "spa_milan"
				duration = 7300
			}
		}
	}
}

gc_spain_4_b = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SPA
			tag = IBA
		}
		NOT = { primary_culture = aragonese }
		NOT = { primary_culture = catalan }
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_spa_spanish_armada = {
		icon = mission_spanish_armada
		required_missions = { gc_spa_spanish_netherlands }
		position = 4

		trigger = {
			has_flagship = yes
			if = {
				limit = {
					exists = GBR
				}
				num_of_heavy_ship = GBR
			}
			else_if = {
				limit = {
					exists = ENG
				}
				num_of_heavy_ship = ENG
			}
			else = {
				num_of_heavy_ship = 20
			}
		}
		effect = {
			add_country_modifier = {
				name = "spa_prepared_armada"
				duration = 7300
			}
			if = {
				limit = {
					exists = GBR
					is_subject = no
					government = monarchy
					religion_group = christian
					GBR = {
						is_subject = no
						NOT = { religion = ROOT }
						government = monarchy
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = GBR
				}
			}
			else_if = {
				limit = {
					exists = ENG
					is_subject = no
					government = monarchy
					religion_group = christian
					ENG = {
						is_subject = no
						NOT = { religion = ROOT }
						government = monarchy
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = ENG
				}
			}
			else = {
				wessex_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				home_counties_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				east_anglia_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				east_midlands_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				west_midlands_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				yorkshire_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	gc_spa_invade_england = {
		icon = mission_invade_england
		required_missions = { gc_spa_spanish_armada }

		provinces_to_highlight = {
			OR = {
				area = wessex_area
				area = home_counties_area
				area = east_anglia_area
				area = east_midlands_area
				area = west_midlands_area
				area = yorkshire_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			wessex_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			home_counties_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_anglia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_midlands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_midlands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			yorkshire_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					GBR = {
						is_subject_of_type = personal_union
						is_subject_of = ROOT
						NOT = { religion = ROOT }
					}
				}
				GBR = {
					change_religion = ROOT
				}
			}
			else_if = {
				limit = {
					ENG = {
						is_subject_of_type = personal_union
						is_subject_of = ROOT
						NOT = { religion = ROOT }
					}
				}
				ENG = {
					change_religion = ROOT
				}
			}
			else = {
				add_prestige = 25
			}
			if = {
				limit = {
					religion = catholic
				}
				add_papal_influence = 25
			}
		}
	}
}

gc_spain_4_c = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	gc_cas_spa_new_granada = {
		icon = mission_new_kingdom_of_granada
		required_missions = { gc_cas_spa_spanish_colombia }
		completed_by = 1509.1.1
		position = 7

		provinces_to_highlight = {
			colonial_region = colonial_colombia
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			if = {
				limit = {
					has_dlc = "Golden Century"
				}
				custom_trigger_tooltip = {
					tooltip = colombia_holy_order_tooltip
					num_of_states_owned_or_owned_by_non_sovereign_subjects_with = {
						has_holy_order_trigger = yes
						colonial_region = colonial_colombia
						value = 5
					}
				}
			}
			colonial_colombia = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_dip_power = 100
			if = {
				limit = {
					government = monarchy
				}
				add_legitimacy = 25
			}
			add_country_modifier = {
				name = "spa_new_granada"
				duration = 7300
			}
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = colony
						owns = 825
					}
					825 = { is_capital = no }
				}
				every_subject_country = {
					limit = {
						owns = 825
					}
					825 = {
						prev_move_capital_effect = yes
					}
				}
			}
			colonial_guyana = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			popayan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			coquivacoa_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			cordillera_occidental_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			bogota_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

gc_spain_4_d = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_cas_spa_west_africa = {
		icon = mission_west_african_ports
		required_missions = {  }
		position = 8

		provinces_to_highlight = {
			OR = {
				AND = {
					region = guinea_region
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				province_id = 1466
			}
			has_discovered = ROOT
		}

		trigger = {
			guinea_region = {
				owned_by = ROOT
			}
			1466 = {
				is_strongest_trade_power = ROOT
			}
		}
		effect = {
			add_mercantilism = 2
		}
	}
	gc_cas_spa_discover_spice_islands = {
		icon = mission_sail_to_the_east_indies
		required_missions = { gc_cas_spa_west_africa }

		trigger = {
			custom_trigger_tooltip = {
				tooltip = cas_spice_islands_tooltip
				colonial_philippines = {
					type = all
					has_discovered = ROOT
				}
			}
		}
		ai_priority = {
            factor = 200
        }
		effect = {
			hidden_effect = {
				if = {
					limit = {
						4352 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					4352 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
			
			4352 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
			mindanao_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			west_mindanao_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			visayas_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			palawan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			luzon_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			southern_luzon_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			colonial_philippines = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_cas_spa_conquer_philippines = {
		icon = mission_las_islas_filipinas
		required_missions = { gc_cas_spa_discover_spice_islands }

		provinces_to_highlight = {
			OR = {
				area = mindanao_area
				area = west_mindanao_area
				area = visayas_area
				area = palawan_area
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}

		trigger = {
			southern_luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			visayas_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			palawan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_army_tradition = 15
			southern_luzon_area = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				change_religion = ROOT
			}
			luzon_area = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				change_religion = ROOT
			}
			mindanao_area = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				change_religion = ROOT
			}
			west_mindanao_area = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				change_religion = ROOT
			}
			visayas_area = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				change_religion = ROOT
			}
			palawan_area = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				change_religion = ROOT
			}
			if = {
				limit = {
					has_dlc = "Dharma"
					656 = {
						NOT = {
							province_has_center_of_trade_of_level = 2
						}
					}
				}
				656 = {
					add_center_of_trade_level = 1
				}
			}
		}
	}
}

gc_spain_5_a = {
	slot = 6
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_cas_spa_reconquista_two = {
		icon = mission_cannons_firing
		required_missions = { gc_cas_spa_reconquista_three }
		position = 2

		# free mission

		provinces_to_highlight = {
			OR = {
				area = beieras_area
				area = alentejo_area
			}
			NOT = { owned_by = ROOT }
		}

		trigger = {
			beieras_area = {
				type = all
				owned_by = ROOT
			}
			alentejo_area = {
				type = all
				owned_by = ROOT
			}
		}

		effect = {
			add_prestige = 25
			add_adm_power = 100
		}
	}
}

gc_spain_5_b = {
	slot = 6
	generic = no
	ai = yes
	potential = {
		tag = SPA
		NOT = { primary_culture = aragonese }
		NOT = { primary_culture = catalan }
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_spa_spanish_netherlands = {
		icon = mission_spanish_netherlands
		required_missions = { gc_cas_spa_italian_ambition }
		position = 3

		provinces_to_highlight = {
			OR = {
				area = flanders_area
				area = wallonia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			flanders_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				religion = ROOT
			}
			wallonia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				religion = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					exists = HAB
					is_subject = no
					government = monarchy
					religion_group = christian
					HAB = {
						is_subject = no
						government = monarchy
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = HAB
				}
			}
			else = {
				tirol_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				austria_proper_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				inner_austria_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			netherlands_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
			}
			frisia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
			}
			holland_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
			}
		}
	}
	gc_spa_austrian_union = {
		icon = mission_the_austrian_succession
		required_missions = { gc_spa_spanish_netherlands }

		provinces_to_highlight = {
			OR = {
				area = inner_austria_area
				area = austria_proper_area
				area = tirol_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			inner_austria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			austria_proper_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tirol_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "spanish_imperial_ambition"
				duration = 7300
			}
		}
	}
	gc_spa_hre = {
		icon = mission_imperial_spain
		required_missions = { gc_spa_austrian_union }

		trigger = {
			OR = {
				ROOT = {
					is_emperor = yes
					hre_reform_level = 6
				}
				AND = {
					NOT = { hre_size = 1 }
					NOT = { exists = HLR }
				}
			}
		}
		effect = {
			if = {
				limit = {
					is_emperor = yes
				}
				add_imperial_influence = 50
			}
			else = {
				add_prestige = 50
			}
		}
	}
}
gc_spain_5_c = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = CAS
			AND = {
				tag = SPA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
			AND = {
				tag = IBA
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	gc_cas_spa_discover_la_plata = {
		icon = mission_establish_high_seas_navy
		required_missions = { gc_cas_spa_spanish_colombia }
		completed_by = 1508.1.1
		position = 7

		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_la_plata
				colonial_region = colonial_la_upper_plata
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = yes
		}

		trigger = {
			if = {
				limit = {
					is_random_new_world = yes
				}
				any_owned_province = {
					continent = new_world
				}
			}
			else = {
				colonial_la_plata = { has_discovered = ROOT }
				colonial_la_upper_plata = { has_discovered = ROOT }
			}
		}

		effect = {		
			add_prestige = 15
			add_country_modifier = {
				name = "the_unknown_frontier"
				duration = 5475
			}
			
			hidden_effect = {
				if = {
					limit = {
						778 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } is_colonial_nation = no } }
					}
					778 = {
						owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
						
						random_empty_neighbor_province = { 
							change_religion = event_target:native_move
							change_culture = event_target:native_move
							add_core = event_target:native_move			
							cede_province = event_target:native_move
						}
						clear_global_event_target = native_move
					
						cede_province = 0
					}
				}
			}
				
			778 = {
				if = {
					limit = { is_empty = yes }
					change_religion = ROOT	
					change_culture = ROOT
					cede_province = ROOT
					add_territorial_core = ROOT
				}
			}
			
			colonial_la_upper_plata = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	gc_cas_spa_la_upper_plata = {
		icon = mission_iberian_conquistador
		required_missions = { gc_cas_spa_discover_la_plata }
		completed_by = 1508.1.1
		position = 8

		provinces_to_highlight = {
			colonial_region = colonial_la_upper_plata
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = yes
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				colonial_region = colonial_la_upper_plata
				is_city = yes
			}
		}

		effect = {
			add_country_modifier = {
				name = "spa_rb_overseas_trade"
				duration = 5475
			}
			
			every_province = {
				limit = {
					colonial_region = colonial_la_upper_plata
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
			
			colonial_la_plata = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

gc_spain_5_d = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				OR = {
					tag = SPA
					tag = IBA
				}
				NOT = { primary_culture = aragonese }
				NOT = { primary_culture = catalan }
			}
		}
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes
	
	gc_cas_spa_la_plata = {
		icon = mission_iberian_conquistador
		required_missions = { gc_cas_spa_la_upper_plata }
		completed_by = 1508.1.1
		position = 9

		provinces_to_highlight = {
			colonial_region = colonial_la_plata
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = yes
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 14
				colonial_region = colonial_la_plata
				is_city = yes
			}
		}

		effect = {
			add_country_modifier = {
				name = "spa_rb_overseas_trade"
				duration = 5475
			}
			
			every_province = {
				limit = {
					colonial_region = colonial_la_plata
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
		}
	}
	
	gc_cas_spa_brazil = {
		icon = mission_brazilian_bandeirantes
		required_missions = { gc_cas_spa_la_plata }
		completed_by = 1508.1.1
		position = 10

		provinces_to_highlight = {
			colonial_region = colonial_brazil
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = yes
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				colonial_region = colonial_brazil
				is_city = yes
			}
			NOT = {
				exists = POR
			}
		}

		effect = {
			add_country_modifier = {
				name = "spa_rb_overseas_trade"
				duration = 5475
			}
			
			every_province = {
				limit = {
					colonial_region = colonial_brazil
				}
				if = { 
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					cede_province = ROOT
					change_religion = ROOT	
					change_culture = ROOT
				}
				else_if = {
					limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
					add_colonysize = 999
				}
				else_if = { 
					limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_claim = ROOT
				}
			}
		}
	}
}
